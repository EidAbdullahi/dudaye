{% extends 'dashboard/base.html' %}
{% load static %}

{% block title %}Claim Details | Health Insurance{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto p-6 bg-white rounded-xl shadow-lg mt-8">

  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-gray-800">{{ dashboard_title }}</h1>
    <a href="{% url 'claims:claim_list' %}" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition">
      â¬… Back to Claims
    </a>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <p class="font-semibold">Claim Number:</p>
      <p>{{ claim.claim_number }}</p>
    </div>

    <div>
      <p class="font-semibold">Client:</p>
      <p>{{ claim.client.first_name }} {{ claim.client.last_name }}</p>
    </div>

    <div>
      <p class="font-semibold">Policy:</p>
      <p>{{ claim.policy.policy_number }}</p>
    </div>

    <div>
      <p class="font-semibold">Hospital:</p>
      <p>{% if claim.hospital %}{{ claim.hospital.name }}{% else %}N/A{% endif %}</p>
    </div>

    <div>
      <p class="font-semibold">Amount:</p>
      <p>${{ claim.amount }}</p>
    </div>

    <div>
      <p class="font-semibold">Status:</p>
      <p class="capitalize">{{ claim.status }}</p>
    </div>

    <div class="md:col-span-2">
      <p class="font-semibold">Notes / Description:</p>
      <p>{{ claim.notes|default:"N/A" }}</p>
    </div>

    <div>
      <p class="font-semibold">Created By:</p>
      <p>{{ claim.created_by }}</p>
    </div>

    <div>
      <p class="font-semibold">Date Created:</p>
      <p>{{ claim.created_at|date:"M d, Y H:i" }}</p>
    </div>
  </div>

  {% if role in 'admin claim_officer' %}
    <div class="mt-6 flex space-x-2">
      <a href="{% url 'claims:edit_claim' claim.id %}" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">Edit</a>
      {% if claim.status != 'approved' %}
      <form method="POST" action="{% url 'claims:approve_claim' claim.id %}">
        {% csrf_token %}
        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Approve</button>
      </form>
      {% endif %}
      {% if claim.status != 'rejected' %}
      <form method="POST" action="{% url 'claims:reject_claim' claim.id %}">
        {% csrf_token %}
        <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Reject</button>
      </form>
      {% endif %}
    </div>
  {% endif %}
</div>
{% endblock %}
