{% extends "dashboard/base.html" %}
{% block title %}User Management | HealthInsure{% endblock %}

{% block content %}
<div class="p-6 bg-white dark:bg-gray-800 rounded-xl shadow space-y-6">
  <h1 class="text-2xl font-bold text-gray-800 dark:text-gray-100">ðŸ‘¥ User Management</h1>

  <table class="min-w-full border divide-y divide-gray-200 dark:divide-gray-700">
    <thead class="bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300">
      <tr>
        <th class="px-4 py-3 text-left">#</th>
        <th class="px-4 py-3 text-left">Username</th>
        <th class="px-4 py-3 text-left">Email</th>
        <th class="px-4 py-3 text-left">Role</th>
        <th class="px-4 py-3 text-center">Status</th>
        <th class="px-4 py-3 text-center">Action</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-100 dark:divide-gray-700">
      {% for user in users %}
      <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition">
        <td class="px-4 py-3">{{ forloop.counter }}</td>
        <td class="px-4 py-3 font-medium">{{ user.username }}</td>
        <td class="px-4 py-3">{{ user.email }}</td>
        <td class="px-4 py-3 capitalize">{{ user.role|default:"â€”" }}</td>
        <td class="px-4 py-3 text-center">
          {% if user.is_active %}
            <span class="px-2 py-1 text-xs font-semibold bg-green-100 text-green-700 rounded-full">Active</span>
          {% else %}
            <span class="px-2 py-1 text-xs font-semibold bg-red-100 text-red-700 rounded-full">Inactive</span>
          {% endif %}
        </td>
        <td class="px-4 py-3 text-center">
          <a href="{% url 'accounts:toggle_user_status' user.id %}" 
             class="px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm transition">
            {% if user.is_active %}Deactivate{% else %}Activate{% endif %}
          </a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="6" class="text-center py-6 text-gray-500">No users found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
